# $Id: pixelMatchElectronL1NonIsoLargeWindowSequenceForHLT.cff,v 1.3 2008/03/22 12:32:51 dkcira Exp $
# create a sequence with all required modules and sources needed to make
# pixel based electrons
#
# NB: it assumes that ECAL clusters (hybrid) are in the event
#
#

############ initialize magnetic field #########################

############### initialize geometry #####################
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"

### ESProducers needed for tracking
include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"
include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"
include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"
include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"
include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi" 
include "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"
include "TrackingTools/MaterialEffects/data/OppositeMaterialPropagator.cfi"
include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"
include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
include "RecoTracker/CkfPattern/data/CkfTrajectoryBuilderESProducer.cff"

# modules to make seeds, tracks and electrons
include "RecoEgamma/EgammaHLTProducers/data/egammaHLTChi2MeasurementEstimatorESProducer.cff"
include "RecoEgamma/EgammaElectronProducers/data/electronPixelSeeds.cfi"
module l1NonIsoLargeWindowElectronPixelSeeds = electronPixelSeeds from "RecoEgamma/EgammaElectronProducers/data/electronPixelSeeds.cfi"
include "RecoEgamma/EgammaHLTProducers/data/pixelSeedConfigurationsForHLT.cfi"
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration = {
    using l1NonIsoLargeWindowElectronPixelSeedConfiguration
}

replace l1NonIsoLargeWindowElectronPixelSeeds.barrelSuperClusters = correctedHybridSuperClustersL1NonIsolated
replace l1NonIsoLargeWindowElectronPixelSeeds.endcapSuperClusters = correctedEndcapSuperClustersWithPreshowerL1NonIsolated

include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronsL1NonIsoLargeWindowForHLT.cff"

# CKFTrackCandidateMaker
module ckfL1NonIsoLargeWindowTrackCandidates = ckfTrackCandidates from "RecoTracker/CkfPattern/data/CkfTrackCandidates.cfi"
replace ckfL1NonIsoLargeWindowTrackCandidates.SeedProducer ="l1NonIsoLargeWindowElectronPixelSeeds"

# CTF track fit with material
module ctfL1NonIsoLargeWindowWithMaterialTracks = ctfWithMaterialTracks from "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
replace ctfL1NonIsoLargeWindowWithMaterialTracks.src = "ckfL1NonIsoLargeWindowTrackCandidates"

sequence pixelMatchElectronL1NonIsoLargeWindowSequenceForHLT = {
                                             l1NonIsoLargeWindowElectronPixelSeeds
                                             }

sequence pixelMatchElectronL1NonIsoLargeWindowTrackingSequenceForHLT = {
                                                     ckfL1NonIsoLargeWindowTrackCandidates &
                                                     ctfL1NonIsoLargeWindowWithMaterialTracks &
                                                     pixelMatchElectronsL1NonIsoLargeWindowForHLT
                                                     }
