## regional seeding 
# act locally, not globally!  so regional pixel tracking, let's go:

module l1NonIsoLargeWindowElectronsRegionalPixelSeedGenerator = hltEgammaRegionalPixelSeedGenerator from "RecoEgamma/EgammaHLTProducers/data/hltEgammaRegionalPixelSeedGenerator.cfi"

replace l1NonIsoLargeWindowElectronsRegionalPixelSeedGenerator.candTag =  l1NonIsoRecoEcalCandidate
replace l1NonIsoLargeWindowElectronsRegionalPixelSeedGenerator.candTagEle =  pixelMatchElectronsL1NonIsoLargeWindowForHLT
replace l1NonIsoLargeWindowElectronsRegionalPixelSeedGenerator.UseZInVertex =  true
replace l1NonIsoLargeWindowElectronsRegionalPixelSeedGenerator.originHalfLength = 0.5  

include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"
include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"
include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi"

# TrackerTrajectoryBuilders
include "RecoTracker/CkfPattern/data/CkfTrajectoryBuilderESProducer.cff"
include "RecoTracker/CkfPattern/data/GroupedCkfTrajectoryBuilderESProducer.cff"

############### generate Ckf track candidates ############

module l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates = ckfTrackCandidates from "RecoTracker/CkfPattern/data/CkfTrackCandidates.cfi"
#bool   seedCleaning         = false
replace l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates.SeedProducer   = "l1NonIsoLargeWindowElectronsRegionalPixelSeedGenerator"
replace l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates.SeedLabel      = ""
replace l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates.TrajectoryBuilder     = "CkfTrajectoryBuilder"
replace l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates.TrajectoryCleaner     = "TrajectoryCleanerBySharedHits"
## set it as "none" to avoid redundant seed cleaner
replace l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates.RedundantSeedCleaner  = "CachingSeedCleanerBySharedInput"
#replace l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates.RedundantSeedCleaner  = "none"
replace l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates.NavigationSchool      = "SimpleNavigationSchool"

#-------------------------------------------------------------------	


##################### generate CTF track candidates

# magnetic field

# cms geometry
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

# tracker geometry
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

# tracker numbering
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

# KFUpdatoerESProducer
include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"

# Chi2MeasurementEstimatorESProducer
include "TrackingTools/KalmanUpdators/data/Chi2MeasurementEstimatorESProducer.cfi"

# KFTrajectoryFitterESProducer
include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"

# KFTrajectorySmootherESProducer
include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"

# KFFittingSmootherESProducer
include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi"

# PropagatorWithMaterialESProducer
include "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"

# PropagatorWithMaterialESProducer
include "TrackingTools/MaterialEffects/data/OppositeMaterialPropagator.cfi"

# stripCPE
include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"

# pixelCPE
include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"

#TransientTrackingBuilder
include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"

# TrackProducer
module l1NonIsoLargeWindowElectronsRegionalCTFFinalFitWithMaterial = hltEgammaRegionalCTFFinalFitWithMaterial from "RecoEgamma/EgammaHLTProducers/data/hltEgammaRegionalCTFFinalFitWithMaterial.cfi"

replace l1NonIsoLargeWindowElectronsRegionalCTFFinalFitWithMaterial.src = "l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates"


##-------------------------------------------

  # RoadSearchCloudMaker
  include "RecoTracker/RoadSearchCloudMaker/data/RoadSearchClouds.cff"
  include "RecoTracker/RoadSearchCloudCleaner/data/CleanRoadSearchClouds.cff"

  # RoadSearchTrackCandidateMaker
  include "RecoTracker/RoadSearchTrackCandidateMaker/data/RoadSearchTrackCandidates.cff"

  # RS track fit with material 
  include "RecoTracker/TrackProducer/data/RSFinalFitWithMaterial.cff"



  sequence l1NonIsoLargeWindowElectronsRegionalRecoTracker = {l1NonIsoLargeWindowElectronsRegionalPixelSeedGenerator, l1NonIsoLargeWindowElectronsRegionalCkfTrackCandidates, l1NonIsoLargeWindowElectronsRegionalCTFFinalFitWithMaterial} 

