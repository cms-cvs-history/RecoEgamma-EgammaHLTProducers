# $Id: pixelMatchElectronL1NonIsoSequenceForHLT.cff,v 1.2 2007/10/19 17:35:02 ghezzi Exp $
# create a sequence with all required modules and sources needed to make
# pixel based electrons
#
# NB: it assumes that ECAL clusters (hybrid) are in the event
#
#

############ initialize magnetic field #########################
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

############### initialize geometry #####################
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"

### ESProducers needed for tracking
include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"
include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"
include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"
include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"
include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi" 
include "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"
include "TrackingTools/MaterialEffects/data/OppositeMaterialPropagator.cfi"
include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"
include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
include "RecoTracker/CkfPattern/data/CkfTrajectoryBuilderESProducer.cff"

# modules to make seeds, tracks and electrons
include "RecoEgamma/EgammaElectronProducers/data/egammaChi2MeasurementEstimatorESProducer.cfi"
include "RecoEgamma/EgammaElectronProducers/data/electronPixelSeeds.cfi"
module l1NonIsoElectronPixelSeeds = electronPixelSeeds from "RecoEgamma/EgammaElectronProducers/data/electronPixelSeeds.cfi"
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.ePhiMin1=-0.025
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.ePhiMax1=0.015
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.pPhiMin1=-0.015
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.pPhiMax1=0.025
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.pPhiMin2=-0.001
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.pPhiMax2=0.001
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.ZMin1=-15.0
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.ZMax1=15.0
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.ZMin2=-0.05
replace l1NonIsoElectronPixelSeeds.SeedConfiguration.ZMax2=0.05

replace l1NonIsoElectronPixelSeeds.superClusterBarrelProducer = "correctedHybridSuperClustersL1NonIsolated"
#string superClusterBarrelLabel = ""
replace l1NonIsoElectronPixelSeeds.superClusterEndcapProducer = "correctedEndcapSuperClustersWithPreshowerL1NonIsolated"
#string superClusterEndcapLabel = ""

include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronsL1NonIsoForHLT.cff"

# CKFTrackCandidateMaker
#include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"
module ckfL1NonIsoTrackCandidates = ckfTrackCandidates from "RecoTracker/CkfPattern/data/CkfTrackCandidates.cfi"
replace ckfL1NonIsoTrackCandidates.SeedProducer ="l1NonIsoElectronPixelSeeds"
#replace ckfL1NonIsoTrackCandidatesBarrel.SeedLabel ="correctedHybridSuperClustersL1NonIsolated"

#module ckfL1NonIsoTrackCandidatesEndcap = ckfTrackCandidates from "RecoTracker/CkfPattern/data/CkfTrackCandidates.cfi"
#replace ckfL1NonIsoTrackCandidatesEndcap.SeedProducer ="l1NonIsoElectronPixelSeeds"
#replace ckfL1NonIsoTrackCandidatesEndcap.SeedLabel ="correctedEndcapSuperClustersWithPreshowerL1NonIsolated"

# CTF track fit with material
#include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"
module ctfL1NonIsoWithMaterialTracks = ctfWithMaterialTracks from "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
replace ctfL1NonIsoWithMaterialTracks.src = "ckfL1NonIsoTrackCandidates"
#module ctfL1NonIsoWithMaterialTracksEndcap = ctfWithMaterialTracks from "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
#replace ctfL1NonIsoWithMaterialTracksEndcap.src = "ckfL1NonIsoTrackCandidatesEndcap"


sequence pixelMatchElectronL1NonIsoSequenceForHLT = {
                                             l1NonIsoElectronPixelSeeds
                                             }
